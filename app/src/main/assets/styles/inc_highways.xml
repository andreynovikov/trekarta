<?xml version="1.0" encoding="UTF-8"?>
<rendertheme version="1" xmlns="http://opensciencemap.org/rendertheme" xmlns:xi="http://www.w3.org/2001/XInclude">
    <!-- Roads -->
    <m e="way" k="highway">
        <outline-layer fade="14" id="service-road" stroke="color:service-road-outline" width="0.05" />
        <outline-layer id="road" stroke="color:road-outline" width="0.15" />
        <outline-layer id="primary" stroke="color:primary-road-outline" width="0.15" />
        <outline-layer id="motorway" stroke="color:motorway-road-outline" width="0.15" />
        <outline-layer id="cycleway" stroke="color:cycleway" width="0.5" />
        <outline-layer id="cycleway-right" stroke="color:cycleway" width="0.5" half="right" />
        <outline-layer id="cycleway-left" stroke="color:cycleway" width="0.5" half="left" />
        <outline-layer id="cycleway-ramp" stroke="color:cycleway" width="0.3" half="right" />

        <m cat="roads" select="first" zoom-max="7">
            <m v="motorway">
                <line fade="6" stroke="color:motorway-overview" use="fix" width="0.6" />
            </m>
            <m v="trunk">
                <line fade="6" stroke="color:trunk-overview" use="fix" width="0.5" />
            </m>
            <m v="primary">
                <line fade="7" stroke="color:primary-overview" use="fix" width="0.5" />
            </m>
        </m>
        <m zoom-min="8">
            <!-- match tunnel-tag (to ensure tunnel key is present) -->
            <m k="tunnel">
                <!-- match tunnel-tag that are not 'no' -->
                <m k="tunnel" v="-|no">
                    <!-- match area-tag that are 'no' or not present -->
                    <m closed="no">
                        <!-- highway tunnels -->
                        <m k="highway">
                            <m cat="roads" v="construction">
                                <line stroke="color:transparent" use="road-construction" />
                                <text use="road-name" />
                                <m k="toll" v="yes">
                                    <symbol merge-gap="100" merge-group="road-symbols" repeat="true"
                                        repeat-gap="120" src="assets:symbols/transport/toll_road.svg"
                                        text-overlap="false" />
                                </m>
                            </m>
                            <m cat="pedestrian" v="steps" zoom-min="16" select="first">
                                <m cat="hiking">
                                    <line use="path" width="6.0" />
                                    <line fix="true" stroke="color:land" width="5.6" />
                                    <line use="steps" width="0.8" />
                                </m>
                                <m cat="cycling">
                                    <line use="path" width="6.0" />
                                    <line fix="true" stroke="color:land" width="5.6" />
                                    <m k="ramp:bicycle" v="yes">
                                        <line outline="cycleway-ramp" fix="true" stroke="#ffffff" width="8" cap="butt" />
                                    </m>
                                    <line use="steps" width="0.8" />
                                </m>
                                <m>
                                    <line stipple="6" use="path" width="4.0" />
                                    <line fix="true" stroke="color:land" width="3.6" />
                                    <line use="steps" width="-0.8" />
                                </m>
                            </m>
                            <m cat="pedestrian" v="footway|path">
                                <m select="first">
                                    <m cat="cycling" k="bicycle" v="designated|yes">
                                        <line stipple="12" stipple-stroke="color:transparent" use="cycleway" />
                                        <line stroke="color:land" width="0.2" />
                                    </m>
                                    <m cat="hiking">
                                        <line cat="hiking" use="path" width="6.0" />
                                        <line fix="true" stroke="color:land" width="5.6" />
                                        <m k="sac_scale" v="~">
                                            <line fix="true" stroke="#aab28f67" width="4" />
                                        </m>
                                        <m k="sac_scale" select="first">
                                            <m v="t1">
                                                <line fix="true" stroke="#660040ff" width="4" />
                                            </m>
                                            <m v="t2">
                                                <line fix="true" stroke="#660000dd" width="4" />
                                            </m>
                                            <m v="t3">
                                                <line fix="true" stroke="#99e6ad00" width="4" />
                                            </m>
                                            <m v="t4">
                                                <line fix="true" stroke="#66ff0000" width="4" />
                                            </m>
                                            <m v="t5">
                                                <line fix="true" stipple="24" stipple-ratio="0.8" stipple-stroke="#66ff0000" stroke="#aa000000" width="4" />
                                            </m>
                                            <m v="t6">
                                                <line fix="true" stipple="24" stipple-ratio="0.8" stipple-stroke="#aa000000" stroke="color:transparent" width="4" />
                                            </m>
                                        </m>
                                    </m>
                                    <m>
                                        <line stipple="6" use="path" width="2.0" />
                                        <line fix="true" stroke="color:land" width="1.6" />
                                    </m>
                                </m>
                            </m>
                            <m v="bridleway">
                                <line stipple="6" use="bridleway" width="2.0" />
                                <line fix="true" stroke="color:land" width="1.6" />
                            </m>
                            <m cat="cycling" v="cycleway">
                                <line stipple="12" stipple-stroke="color:transparent" use="cycleway" />
                                <line stroke="color:land" width="0.2" />
                            </m>
                            <m cat="tracks" v="track">
                                <line stipple="6" stipple-stroke="color:land"
                                    use="highway:track:good" width="0.8" />
                                <line stroke="color:land" use="highway:track:good" />
                                <m cat="track-names">
                                    <text use="road-name" />
                                </m>
                            </m>
                            <m cat="roads" v="service">
                                <m k="service" v="-|parking_aisle">
                                    <line stipple="8" stipple-ratio="0.4"
                                        stipple-stroke="color:service-road-outline"
                                        use="highway-service-tunnel" />
                                    <line use="highway-service-tunnel" width="-0.1" />
                                </m>
                                <m k="service" v="parking_aisle">
                                    <line stipple="8" stipple-ratio="0.4"
                                        stipple-stroke="color:service-road-outline"
                                        use="highway-service-tunnel" width="-0.2" />
                                    <line use="highway-service-tunnel" width="-0.3" />
                                </m>
                            </m>
                            <m cat="roads" v="tertiary_link">
                                <line stipple="8" stipple-ratio="0.4"
                                    stipple-stroke="color:road-outline"
                                    use="tertiary-tunnel" />
                                <line use="tertiary-tunnel" width="-0.2" />
                                <text use="road-name" />
                            </m>
                            <m cat="roads" v="secondary_link">
                                <line stipple="8" stipple-ratio="0.4"
                                    stipple-stroke="color:road-outline"
                                    use="secondary-tunnel" />
                                <line use="secondary-tunnel" width="-0.2" />
                                <text use="road-name" />
                            </m>
                            <m cat="roads" v="primary_link">
                                <line stipple="8" stipple-ratio="0.4"
                                    stipple-stroke="color:primary-road-outline"
                                    use="primary-tunnel" />
                                <line use="primary-tunnel" width="-0.2" />
                                <text use="major-road-name" />
                            </m>
                            <m cat="roads" v="trunk_link|motorway_link">
                                <line stipple="8" stipple-ratio="0.4"
                                    stipple-stroke="color:motorway-road-outline"
                                    use="trunk-link-tunnel" />
                                <line use="trunk-link-tunnel" width="-0.2" />
                                <text use="major-road-name" />
                            </m>
                            <m cat="pedestrian" v="pedestrian">
                                <line stipple="8" stipple-stroke="color:service-road-outline"
                                    use="pedestrian-tunnel" />
                                <line use="pedestrian-tunnel" width="-0.1" />
                                <text use="road-name" />
                            </m>
                            <m cat="roads" v="road">
                                <line stipple="8" stipple-stroke="color:service-road-outline"
                                    use="pedestrian-tunnel" />
                                <line use="pedestrian-tunnel" width="-0.1" />
                                <text use="road-name" />
                            </m>
                            <m cat="roads" v="residential|living_street">
                                <line stipple="8" stipple-stroke="color:road-outline"
                                    use="residential-tunnel" />
                                <line use="residential-tunnel" width="-0.2" />
                                <text use="road-name" />
                                <m k="toll" v="yes">
                                    <symbol merge-gap="100" merge-group="road-symbols" repeat="true"
                                        repeat-gap="120" src="assets:symbols/transport/toll_road.svg"
                                        text-overlap="false" />
                                </m>
                            </m>
                            <m cat="roads" v="unclassified">
                                <line stipple="8" stipple-ratio="0.4"
                                    stipple-stroke="color:road-outline"
                                    use="unclassified-tunnel" />
                                <line use="unclassified-tunnel" width="-0.2" />
                                <text use="road-name" />
                                <m k="toll" v="yes">
                                    <symbol merge-gap="100" merge-group="road-symbols" repeat="true"
                                        repeat-gap="120" src="assets:symbols/transport/toll_road.svg"
                                        text-overlap="false" />
                                </m>
                            </m>
                            <m cat="roads" v="tertiary">
                                <line stipple="8" stipple-ratio="0.4"
                                    stipple-stroke="color:road-outline"
                                    use="tertiary-tunnel" />
                                <line use="tertiary-tunnel" width="-0.2" />
                                <text use="road-name" />
                                <m cat="roads-shield" zoom-max="16" zoom-min="14">
                                    <symbol merge-gap="150" merge-group="road-symbols" repeat="true"
                                        repeat-gap="150" src="gen:/shield/13/#f0f0f0/#7f462c"
                                        text-overlap="false" billboard="true" />
                                </m>
                                <m k="toll" v="yes">
                                    <symbol merge-gap="100" merge-group="road-symbols" repeat="true"
                                        repeat-gap="120" src="assets:symbols/transport/toll_road.svg"
                                        text-overlap="false" />
                                </m>
                            </m>
                            <m cat="roads" v="secondary">
                                <line stipple="8" stipple-ratio="0.4"
                                    stipple-stroke="color:primary-road-outline"
                                    use="secondary-tunnel" />
                                <line use="secondary-tunnel" width="-0.2" />
                                <text use="major-road-name" />
                                <m cat="roads-shield" zoom-max="16" zoom-min="13">
                                    <symbol merge-gap="150" merge-group="road-symbols" repeat="true"
                                        repeat-gap="150" src="gen:/shield/13/#fdfdf1/#7f462c"
                                        text-overlap="false" billboard="true" />
                                </m>
                                <m k="toll" v="yes">
                                    <symbol merge-gap="100" merge-group="road-symbols" repeat="true"
                                        repeat-gap="120" src="assets:symbols/transport/toll_road.svg"
                                        text-overlap="false" />
                                </m>
                            </m>
                            <m cat="roads" v="primary">
                                <line stipple="8" stipple-ratio="0.4"
                                    stipple-stroke="color:primary-road-outline"
                                    use="primary-tunnel" />
                                <line use="primary-tunnel" width="-0.2" />
                                <text use="major-road-name" />
                                <m cat="roads-shield" zoom-max="16" zoom-min="12">
                                    <symbol merge-gap="150" merge-group="road-symbols" repeat="true"
                                        repeat-gap="150" src="gen:/shield/13/#fdf7e5/#7f462c"
                                        text-overlap="false" billboard="true" />
                                </m>
                                <m k="toll" v="yes">
                                    <symbol merge-gap="100" merge-group="road-symbols" repeat="true"
                                        repeat-gap="120" src="assets:symbols/transport/toll_road.svg"
                                        text-overlap="false" />
                                </m>
                            </m>
                            <m cat="roads" v="trunk">
                                <line stipple="8" stipple-ratio="0.4"
                                    stipple-stroke="color:motorway-road-outline"
                                    use="trunk-tunnel" />
                                <line use="trunk-tunnel" width="-0.2" />
                                <text use="major-road-name" />
                                <m cat="roads-shield" zoom-max="16" zoom-min="11">
                                    <symbol merge-gap="150" merge-group="road-symbols" repeat="true"
                                        repeat-gap="150" src="gen:/shield/13/#fff0b7/#c35817"
                                        text-overlap="false" billboard="true" />
                                </m>
                                <m k="toll" v="yes">
                                    <symbol merge-gap="100" merge-group="road-symbols" repeat="true"
                                        repeat-gap="120" src="assets:symbols/transport/toll_road.svg"
                                        text-overlap="false" />
                                </m>
                            </m>
                            <m cat="roads" v="motorway">
                                <line stipple="8" stipple-ratio="0.4"
                                    stipple-stroke="color:motorway-road-outline"
                                    use="highway-tunnel" />
                                <line use="highway-tunnel" width="-0.2" />
                                <text use="major-road-name" />
                                <m cat="roads-shield" zoom-max="16" zoom-min="10">
                                    <symbol merge-gap="150" merge-group="road-symbols" repeat="true"
                                        repeat-gap="150" src="gen:/shield/13/#fee4be/#c35817"
                                        text-overlap="false" billboard="true" />
                                </m>
                                <m k="toll" v="yes">
                                    <symbol merge-gap="100" merge-group="road-symbols" repeat="true"
                                        repeat-gap="120" src="assets:symbols/transport/toll_road.svg"
                                        text-overlap="false" />
                                </m>
                            </m>
                        </m>
                        <xi:include href="inc_highway_oneways.xml" />
                    </m>
                </m>
            </m>

            <!-- when tunnel is present it must be 'no' -->
            <m k="tunnel" v="~|no">
                <m closed="yes" zoom-min="16">
                    <m cat="pedestrian" v="footway|pedestrian">
                        <area mesh="true" use="pedestrian" />
                    </m>
                    <!--
                    <m cat="roads" v="service|unclassified|residential|road|living_street">
                        <area fill="#ffffff" mesh="true" />
                        <line cap="butt" fix="true" stroke="#d0d0d0" width="1.0" />
                    </m>
                    <m v="path" zoom-min="14">
                        <area fill="#d0d0d0" />
                    </m>
                    -->
                </m>
                <!-- when bridge is present it must be 'no' -->
                <m k="bridge" v="~|no">
                    <m closed="no">
                        <m cat="pedestrian" v="via_ferrata">
                            <!--suppress XmlDefaultAttributeValue -->
                            <line use="steps" stipple-stroke="#000000" />
                            <!--suppress XmlDefaultAttributeValue -->
                            <line cat="hiking" use="steps" stipple-stroke="#000000" width="3.0" />
                        </m>
                        <m cat="pedestrian" v="steps">
                            <m zoom-min="16">
                                <m cat="cycling" k="ramp:bicycle" v="yes">
                                    <line outline="cycleway-ramp" fix="true" stroke="#ffffff" width="8" cap="butt" />
                                </m>
                                <line use="steps" />
                                <line cat="hiking" use="steps" width="3.0" />
                                <line cat="cycling" use="steps" width="3.0" />
                            </m>
                            <m zoom-max="15" zoom-min="14">
                                <line use="path" />
                            </m>
                        </m>
                        <m cat="pedestrian" v="footway|path">
                            <m select="first">
                                <m cat="hiking">
                                    <text use="road-name" />
                                </m>
                                <m zoom-min="16">
                                    <line use="path:back" />
                                </m>
                            </m>
                            <m k="ford" v="yes">
                                <line fix="true" use="ford" width="4.0" />
                                <line cat="hiking" fix="true" use="ford" width="6.0" />
                                <line cat="cycling" fix="true" use="ford" width="6.0" />
                            </m>
                            <m zoom-max="14">
                                <m select="first">
                                    <m k="foot|access" v="no|private">
                                        <line use="path:z14" stroke="color:transparent" />
                                    </m>
                                    <m>
                                        <line use="path:z14" />
                                    </m>
                                </m>
                            </m>
                            <m zoom-min="15" select="first">
                                <m k="foot|access" v="no|private">
                                    <line use="path" stipple-stroke="color:path-access-no" />
                                </m>
                                <m k="trail_visibility" v="excellent|good">
                                    <line stipple="8" stipple-ratio="0.7" use="path" />
                                </m>
                                <m k="trail_visibility" v="bad|horrible|no">
                                    <line stipple="8" stipple-ratio="0.3" use="path" />
                                </m>
                                <m k="trail_visibility" v="~|intermediate">
                                    <line use="path" />
                                </m>
                            </m>
                        </m>
                        <m cat="pedestrian" v="cycleway">
                            <m k="foot" v="yes|designated">
                                <m select="first">
                                    <m cat="hiking">
                                        <text use="road-name" />
                                    </m>
                                    <m zoom-min="16">
                                        <line use="path:back" />
                                    </m>
                                </m>
                                <m zoom-max="14">
                                    <m select="first">
                                        <m k="access" v="no|private">
                                            <line use="path:z14" stroke="color:transparent" />
                                        </m>
                                        <m>
                                            <line use="path:z14" />
                                        </m>
                                    </m>
                                </m>
                                <m zoom-min="15" select="first">
                                    <m k="access" v="no|private">
                                        <line use="path" stipple-stroke="color:path-access-no" />
                                    </m>
                                    <m k="trail_visibility" v="excellent|good">
                                        <line stipple="8" stipple-ratio="0.7" use="path" />
                                    </m>
                                    <m k="trail_visibility" v="bad|horrible|no">
                                        <line stipple="8" stipple-ratio="0.3" use="path" />
                                    </m>
                                    <m k="trail_visibility" v="~|intermediate">
                                        <line use="path" />
                                    </m>
                                </m>
                            </m>
                            <m k="foot" v="~|no">
                                <m zoom-max="14">
                                    <line use="path:z14" stroke="color:transparent" />
                                </m>
                                <m zoom-min="15">
                                    <line use="path" stipple-stroke="color:path-access-no" />
                                </m>
                            </m>
                        </m>
                        <m v="bridleway">
                            <m zoom-min="15">
                                <line cat="tracks" use="path:back" width="0.3" />
                                <line cat="hiking" stroke="#ffffffff" use="path:back" width="4.0" />
                                <line cat="cycling" stroke="#ffffffff" use="path:back" width="4.0" />
                            </m>
                            <m k="ford" v="yes">
                                <line cat="tracks" fix="true" use="ford" width="4.0" />
                                <line cat="hiking" fix="true" use="ford" width="6.0" />
                                <line cat="cycling" fix="true" use="ford" width="6.0" />
                            </m>
                            <line cat="tracks" use="bridleway" />
                            <line cat="hiking" use="bridleway" width="2.2" />
                            <line cat="cycling" use="bridleway" width="2.2" />
                        </m>
                        <m v="track">
                            <m cat="tracks" zoom-max="13" zoom-min="13">
                                <m select="first">
                                    <m k="ice_road" v="yes">
                                        <line stroke="#9bc8c8" use="highway:track:back" />
                                    </m>
                                    <m k="winter_road" v="yes">
                                        <line stroke="#bed8d8" use="highway:track:back" />
                                    </m>
                                </m>
                                <m k="smoothness" v="excellent|good|intermediate|bad">
                                    <line use="highway:track:good" width="-0.8" />
                                </m>
                                <m k="smoothness" v="~|very_bad|horrible">
                                    <line use="highway:track:horrible" width="-0.8" />
                                </m>
                                <m k="smoothness" v="very_horrible">
                                    <line use="highway:track:very_horrible" width="-0.8" />
                                </m>
                                <m k="smoothness" v="impassable">
                                    <line use="highway:track:impassable" width="-0.8" />
                                </m>
                            </m>
                            <m zoom-min="14">
                                <m select="first">
                                    <m k="ford" v="yes">
                                        <line cat="tracks" fix="true" use="ford" width="4.0" />
                                        <line cat="hiking" fix="true" use="ford" width="6.0" />
                                        <line cat="cycling" fix="true" use="ford" width="6.0" />
                                    </m>
                                    <m k="ice_road" v="yes">
                                        <line cat="tracks" stroke="#9bc8c8" use="highway:track:back"
                                            width="0.8" />
                                        <line cat="hiking" stroke="#9bc8c8" use="highway:track:back"
                                            width="4.0" />
                                        <line cat="cycling" stroke="#9bc8c8" use="highway:track:back"
                                            width="4.0" />
                                    </m>
                                    <m k="winter_road" v="yes">
                                        <line cat="tracks" stroke="#bed8d8" use="highway:track:back"
                                            width="0.8" />
                                        <line cat="hiking" stroke="#bed8d8" use="highway:track:back"
                                            width="4.0" />
                                        <line cat="cycling" stroke="#bed8d8" use="highway:track:back"
                                            width="4.0" />
                                    </m>
                                    <m>
                                        <line cat="tracks" use="highway:track:back" />
                                        <line cap="butt" cat="hiking" fix="true" stroke="#ffffff"
                                            width="5.2" />
                                        <line cap="butt" cat="cycling" fix="true" stroke="#ffffff"
                                            width="5.2" />
                                    </m>
                                </m>
                                <m k="smoothness" v="excellent|good|intermediate|bad">
                                    <line cat="tracks" use="highway:track:good" />
                                    <line cat="hiking" use="highway:track:good" width="2.2" />
                                    <line cat="cycling" use="highway:track:good" width="2.2" />
                                </m>
                                <m k="smoothness" v="~|very_bad">
                                    <line cat="tracks" use="highway:track:very_bad" />
                                    <line cat="hiking" use="highway:track:very_bad" width="2.2" />
                                    <line cat="cycling" use="highway:track:very_bad" width="2.2" />
                                </m>
                                <m k="smoothness" v="horrible">
                                    <line cat="tracks" use="highway:track:horrible" />
                                    <line cat="hiking" use="highway:track:horrible" width="2.2" />
                                    <line cat="cycling" use="highway:track:horrible" width="2.2" />
                                </m>
                                <m k="smoothness" v="very_horrible">
                                    <line cat="tracks" use="highway:track:very_horrible" />
                                    <line cat="hiking" use="highway:track:very_horrible" width="2.2" />
                                    <line cat="cycling" use="highway:track:very_horrible" width="2.2" />
                                </m>
                                <m k="smoothness" v="impassable">
                                    <line cat="tracks" use="highway:track:impassable" />
                                    <line cat="hiking" use="highway:track:very_horrible" width="2.2" />
                                    <line cat="cycling" use="highway:track:very_horrible" width="2.2" />
                                </m>
                            </m>
                            <m cat="track-names">
                                <text use="road-name" />
                            </m>
                        </m>
                        <m cat="cycling" v="cycleway">
                            <line use="cycleway:back" />
                            <line use="cycleway" />
                            <text use="road-name" />
                        </m>
                        <m cat="roads" v="service">
                            <!-- matches every service but parking_isle -->
                            <m k="service" v="-|parking_aisle">
                                <m select="first">
                                    <m k="ice_road" v="yes">
                                        <line fade="14" outline="service-road" stroke="color:road-ice"
                                            use="highway-service" />
                                    </m>
                                    <m k="winter_road" v="yes">
                                        <line fade="14" outline="service-road" stroke="color:road-winter"
                                            use="highway-service" />
                                    </m>
                                    <m cat="roads-surface" k="surface" v="dirt">
                                        <line fade="14" outline="service-road" stroke="color:surface-dirt"
                                            use="highway-service" />
                                    </m>
                                    <m cat="roads-surface" k="surface" v="unpaved">
                                        <line fade="14" outline="service-road" stroke="color:surface-unpaved"
                                            use="highway-service" />
                                    </m>
                                    <m>
                                        <line fade="14" outline="service-road" use="highway-service" />
                                        <m cat="cycling" k="cycleway:right" v="track">
                                            <line fade="14" outline="cycleway-right" use="highway-service" />
                                        </m>
                                        <m cat="cycling" k="cycleway:left" v="track">
                                            <line fade="14" outline="cycleway-left" use="highway-service" />
                                        </m>
                                        <m cat="cycling" k="cycleway" v="track">
                                            <line fade="14" outline="cycleway" use="highway-service" />
                                        </m>
                                    </m>
                                    <m select="when-matched">
                                        <m k="ford" v="yes">
                                            <line use="ford" width="-0.2" />
                                            <text style="bold" caption="true"
                                                fill="color:amenity-water" k="depth" size="14"
                                                stroke="color:text-outline" stroke-width="2.0" />
                                        </m>
                                        <m k="4wd_only" v="yes">
                                            <line use="4wd_only" width="-0.3" />
                                        </m>
                                        <m k="access" v="private">
                                            <line fade="14" stipple="15" stipple-stroke="color:service-access-private"
                                                stroke="color:transparent" use="highway-service" width="-0.2" />
                                        </m>
                                        <m k="access" v="no">
                                            <line fade="14" stipple="15" stipple-stroke="color:access-no"
                                                stroke="color:transparent" use="highway-service" width="-0.2" />
                                        </m>
                                    </m>
                                </m>
                                <text use="road-name" />
                            </m>
                            <m k="service" v="parking_aisle" zoom-min="16">
                                <line outline="service-road" use="highway-service" width="-0.2" />
                                <m k="access" v="private">
                                    <line stipple="15" stipple-stroke="color:service-access-private" stroke="color:transparent"
                                        use="highway-service" width="-0.3" />
                                </m>
                                <m k="access" v="no">
                                    <line stipple="15" stipple-stroke="color:access-no" stroke="color:transparent"
                                        use="highway-service" width="-0.3" />
                                </m>
                            </m>
                        </m>
                        <m cat="roads" v="tertiary_link">
                            <m select="first">
                                <m k="ice_road" v="yes">
                                    <line outline="road" stroke="color:road-ice" use="tertiary" />
                                </m>
                                <m k="winter_road" v="yes">
                                    <line outline="road" stroke="color:road-winter" use="tertiary" />
                                </m>
                                <m cat="roads-surface" k="surface" v="dirt">
                                    <line outline="road" stroke="color:surface-dirt" use="tertiary" />
                                </m>
                                <m cat="roads-surface" k="surface" v="unpaved">
                                    <line outline="road" stroke="color:surface-unpaved" use="tertiary" />
                                </m>
                                <m>
                                    <line outline="road" use="tertiary" />
                                    <m cat="cycling" k="cycleway:right" v="track">
                                        <line outline="cycleway-right" use="tertiary" />
                                    </m>
                                    <m cat="cycling" k="cycleway:left" v="track">
                                        <line outline="cycleway-left" use="tertiary" />
                                    </m>
                                    <m cat="cycling" k="cycleway" v="track">
                                        <line outline="cycleway" use="tertiary" />
                                    </m>
                                </m>
                            </m>
                            <text use="road-name" />
                        </m>
                        <m cat="roads" v="secondary_link">
                            <m select="first">
                                <m k="ice_road" v="yes">
                                    <line outline="road" stroke="color:road-ice" use="secondary" />
                                </m>
                                <m k="winter_road" v="yes">
                                    <line outline="road" stroke="color:road-winter" use="secondary" />
                                </m>
                                <m cat="roads-surface" k="surface" v="dirt">
                                    <line outline="road" stroke="color:surface-dirt" use="secondary" />
                                </m>
                                <m cat="roads-surface" k="surface" v="unpaved">
                                    <line outline="road" stroke="color:surface-unpaved" use="secondary" />
                                </m>
                                <m>
                                    <line outline="road" use="secondary" />
                                    <m cat="cycling" k="cycleway:right" v="track">
                                        <line outline="cycleway-right" use="secondary" />
                                    </m>
                                    <m cat="cycling" k="cycleway:left" v="track">
                                        <line outline="cycleway-left" use="secondary" />
                                    </m>
                                    <m cat="cycling" k="cycleway" v="track">
                                        <line outline="cycleway" use="secondary" />
                                    </m>
                                </m>
                            </m>
                            <text use="road-name" />
                        </m>
                        <m cat="roads" v="primary_link">
                            <m select="first">
                                <m k="ice_road" v="yes">
                                    <line outline="primary" stroke="color:road-ice" use="primary" />
                                </m>
                                <m k="winter_road" v="yes">
                                    <line outline="primary" stroke="color:road-winter" use="primary" />
                                </m>
                                <m cat="roads-surface" k="surface" v="dirt">
                                    <line outline="primary" stroke="color:surface-dirt" use="primary" />
                                </m>
                                <m cat="roads-surface" k="surface" v="unpaved">
                                    <line outline="primary" stroke="color:surface-unpaved" use="primary" />
                                </m>
                                <m>
                                    <line outline="primary" use="primary" />
                                    <m cat="cycling" k="cycleway:right" v="track">
                                        <line outline="cycleway-right" use="primary" />
                                    </m>
                                    <m cat="cycling" k="cycleway:left" v="track">
                                        <line outline="cycleway-left" use="primary" />
                                    </m>
                                    <m cat="cycling" k="cycleway" v="track">
                                        <line outline="cycleway" use="primary" />
                                    </m>
                                </m>
                            </m>
                            <text use="major-road-name" />
                        </m>
                        <m cat="roads" v="trunk_link|motorway_link">
                            <m select="first">
                                <m k="ice_road" v="yes">
                                    <line outline="motorway" stroke="color:road-ice" use="trunk-link" />
                                </m>
                                <m k="winter_road" v="yes">
                                    <line outline="motorway" stroke="color:road-winter" use="trunk-link" />
                                </m>
                                <m>
                                    <line outline="motorway" use="trunk-link" />
                                    <m cat="cycling" k="cycleway:right" v="track">
                                        <line outline="cycleway-right" use="trunk-link" />
                                    </m>
                                    <m cat="cycling" k="cycleway:left" v="track">
                                        <line outline="cycleway-left" use="trunk-link" />
                                    </m>
                                    <m cat="cycling" k="cycleway" v="track">
                                        <line outline="cycleway" use="trunk-link" />
                                    </m>
                                </m>
                            </m>
                            <text use="major-road-name" />
                        </m>
                        <m cat="roads" v="construction">
                            <line use="road-construction" />
                            <m k="ford" v="yes">
                                <line use="ford" width="-0.2" />
                                <text style="bold" caption="true"
                                    fill="color:amenity-water" k="depth" size="14"
                                    stroke="color:text-outline" stroke-width="2.0" />
                            </m>
                            <text use="road-name" />
                            <m k="toll" v="yes">
                                <symbol merge-gap="100" merge-group="road-symbols" repeat="true"
                                    repeat-gap="120" src="assets:symbols/transport/toll_road.svg"
                                    text-overlap="false" />
                            </m>
                        </m>
                        <m cat="pedestrian" v="pedestrian">
                            <line outline="service-road" use="pedestrian" />
                            <m cat="cycling" k="cycleway:right" v="track">
                                <line outline="cycleway-right" use="pedestrian" />
                            </m>
                            <m cat="cycling" k="cycleway:left" v="track">
                                <line outline="cycleway-left" use="pedestrian" />
                            </m>
                            <m cat="cycling" k="cycleway" v="track">
                                <line outline="cycleway" use="pedestrian" />
                            </m>
                            <text use="road-name" />
                        </m>
                        <m cat="roads" v="road">
                            <line outline="road" use="pedestrian" />
                            <m cat="cycling" k="cycleway:right" v="track">
                                <line outline="cycleway-right" use="pedestrian" />
                            </m>
                            <m cat="cycling" k="cycleway:left" v="track">
                                <line outline="cycleway-left" use="pedestrian" />
                            </m>
                            <m cat="cycling" k="cycleway" v="track">
                                <line outline="cycleway" use="pedestrian" />
                            </m>
                            <text use="road-name" />
                        </m>
                        <m cat="roads" v="residential|living_street">
                            <m select="first">
                                <m k="ice_road" v="yes">
                                    <line outline="road" stroke="color:road-ice" use="residential" />
                                </m>
                                <m k="winter_road" v="yes">
                                    <line outline="road" stroke="color:road-winter" use="residential" />
                                </m>
                                <m cat="roads-surface" k="surface" v="dirt">
                                    <line outline="road" stroke="color:surface-dirt" use="residential" />
                                </m>
                                <m cat="roads-surface" k="surface" v="unpaved">
                                    <line outline="road" stroke="color:surface-unpaved" use="residential" />
                                </m>
                                <m>
                                    <line outline="road" use="residential" />
                                    <m cat="cycling" k="cycleway:right" v="track">
                                        <line outline="cycleway-right" use="residential" />
                                    </m>
                                    <m cat="cycling" k="cycleway:left" v="track">
                                        <line outline="cycleway-left" use="residential" />
                                    </m>
                                    <m cat="cycling" k="cycleway" v="track">
                                        <line outline="cycleway" use="residential" />
                                    </m>
                                </m>
                            </m>
                            <m k="ford" v="yes">
                                <line use="ford" width="-0.2" />
                                <text style="bold" caption="true"
                                    fill="color:amenity-water" k="depth" size="14"
                                    stroke="color:text-outline" stroke-width="2.0" />
                            </m>
                            <m k="4wd_only" v="yes">
                                <line use="4wd_only" width="-0.3" />
                            </m>
                            <m k="access" v="private">
                                <line stipple="15" stipple-stroke="color:access-private" stroke="color:transparent"
                                    use="residential" width="-0.2" />
                            </m>
                            <m k="access" v="no">
                                <line stipple="15" stipple-stroke="color:access-no" stroke="color:transparent"
                                    use="residential" width="-0.2" />
                            </m>
                            <text use="road-name" />
                            <m k="toll" v="yes">
                                <symbol merge-gap="100" merge-group="road-symbols" repeat="true"
                                    repeat-gap="120" src="assets:symbols/transport/toll_road.svg"
                                    text-overlap="false" />
                            </m>
                        </m>
                        <m cat="roads" v="unclassified">
                            <m select="first">
                                <m k="ice_road" v="yes">
                                    <line outline="road" stroke="color:road-ice" use="unclassified" />
                                </m>
                                <m k="winter_road" v="yes">
                                    <line outline="road" stroke="color:road-winter" use="unclassified" />
                                </m>
                                <m cat="roads-surface" k="surface" v="dirt">
                                    <line outline="road" stroke="color:surface-dirt" use="unclassified" />
                                </m>
                                <m cat="roads-surface" k="surface" v="unpaved">
                                    <line outline="road" stroke="color:surface-unpaved" use="unclassified" />
                                </m>
                                <m>
                                    <line outline="road" use="unclassified" />
                                    <m cat="cycling" k="cycleway:right" v="track">
                                        <line outline="cycleway-right" use="unclassified" />
                                    </m>
                                    <m cat="cycling" k="cycleway:left" v="track">
                                        <line outline="cycleway-left" use="unclassified" />
                                    </m>
                                    <m cat="cycling" k="cycleway" v="track">
                                        <line outline="cycleway" use="unclassified" />
                                    </m>
                                </m>
                            </m>
                            <m k="ford" v="yes">
                                <line use="ford" />
                                <text style="bold" caption="true"
                                    fill="color:amenity-water" k="depth" size="14"
                                    stroke="color:text-outline" stroke-width="2.0" />
                            </m>
                            <m k="4wd_only" v="yes">
                                <line use="4wd_only" width="-0.1" />
                            </m>
                            <m k="access" v="private">
                                <line stipple="15" stipple-stroke="color:access-private" stroke="color:transparent"
                                    use="unclassified" width="-0.2" />
                            </m>
                            <m k="access" v="no">
                                <line stipple="15" stipple-stroke="color:access-no" stroke="color:transparent"
                                    use="unclassified" width="-0.2" />
                            </m>
                            <text use="road-name" />
                            <m k="toll" v="yes">
                                <symbol merge-gap="100" merge-group="road-symbols" repeat="true"
                                    repeat-gap="120" src="assets:symbols/transport/toll_road.svg"
                                    text-overlap="false" />
                            </m>
                        </m>
                        <m cat="roads" v="tertiary">
                            <m select="first">
                                <m k="ice_road" v="yes">
                                    <line outline="road" stroke="color:road-ice" use="tertiary" />
                                </m>
                                <m k="winter_road" v="yes">
                                    <line outline="road" stroke="color:road-winter" use="tertiary" />
                                </m>
                                <m cat="roads-surface" k="surface" v="dirt">
                                    <line outline="road" stroke="color:surface-dirt" use="tertiary" />
                                </m>
                                <m cat="roads-surface" k="surface" v="unpaved">
                                    <line outline="road" stroke="color:surface-unpaved" use="tertiary" />
                                </m>
                                <m>
                                    <line outline="road" use="tertiary" />
                                    <m cat="cycling" k="cycleway:right" v="track">
                                        <line outline="cycleway-right" use="tertiary" />
                                    </m>
                                    <m cat="cycling" k="cycleway:left" v="track">
                                        <line outline="cycleway-left" use="tertiary" />
                                    </m>
                                    <m cat="cycling" k="cycleway" v="track">
                                        <line outline="cycleway" use="tertiary" />
                                    </m>
                                </m>
                            </m>
                            <m k="ford" v="yes">
                                <line use="ford" />
                                <text style="bold" caption="true"
                                    fill="color:amenity-water" k="depth" size="14"
                                    stroke="color:text-outline" stroke-width="2.0" />
                            </m>
                            <m k="4wd_only" v="yes">
                                <line use="4wd_only" />
                            </m>
                            <text use="road-name" />
                            <m cat="roads-shield" zoom-max="16" zoom-min="14">
                                <symbol merge-gap="150" merge-group="road-symbols" repeat="true"
                                    repeat-gap="150" src="gen:/shield/13/#f0f0f0/#7f462c"
                                    text-overlap="false" billboard="true" />
                            </m>
                            <m k="toll" v="yes">
                                <symbol merge-gap="100" merge-group="road-symbols" repeat="true"
                                    repeat-gap="120" src="assets:symbols/transport/toll_road.svg"
                                    text-overlap="false" />
                            </m>
                        </m>
                        <m cat="roads" v="secondary">
                            <m select="first">
                                <m k="ice_road" v="yes">
                                    <line outline="primary" stroke="color:road-ice" use="secondary" />
                                </m>
                                <m k="winter_road" v="yes">
                                    <line outline="primary" stroke="color:road-winter" use="secondary" />
                                </m>
                                <m cat="roads-surface" k="surface" v="dirt">
                                    <line outline="primary" stroke="color:surface-dirt" use="secondary" />
                                </m>
                                <m cat="roads-surface" k="surface" v="unpaved">
                                    <line outline="primary" stroke="color:surface-unpaved" use="secondary" />
                                </m>
                                <m>
                                    <line outline="primary" use="secondary" />
                                    <m cat="cycling" k="cycleway:right" v="track">
                                        <line outline="cycleway-right" use="secondary" />
                                    </m>
                                    <m cat="cycling" k="cycleway:left" v="track">
                                        <line outline="cycleway-left" use="secondary" />
                                    </m>
                                    <m cat="cycling" k="cycleway" v="track">
                                        <line outline="cycleway" use="secondary" />
                                    </m>
                                </m>
                            </m>
                            <m k="ford" v="yes">
                                <line use="ford" />
                                <text style="bold" caption="true"
                                    fill="color:amenity-water" k="depth" size="14"
                                    stroke="color:text-outline" stroke-width="2.0" />
                            </m>
                            <m k="4wd_only" v="yes">
                                <line use="4wd_only" />
                            </m>
                            <text use="major-road-name" />
                            <m cat="roads-shield" zoom-max="16" zoom-min="13">
                                <symbol merge-gap="150" merge-group="road-symbols" repeat="true"
                                    repeat-gap="150" src="gen:/shield/13/#fdfdf1/#7f462c"
                                    text-overlap="false" billboard="true" />
                            </m>
                            <m k="toll" v="yes">
                                <symbol merge-gap="100" merge-group="road-symbols" repeat="true"
                                    repeat-gap="120" src="assets:symbols/transport/toll_road.svg"
                                    text-overlap="false" />
                            </m>
                        </m>
                        <m cat="roads" v="primary">
                            <m select="first">
                                <m k="ice_road" v="yes">
                                    <line outline="primary" stroke="color:road-ice" use="primary" />
                                </m>
                                <m k="winter_road" v="yes">
                                    <line outline="primary" stroke="color:road-winter" use="primary" />
                                </m>
                                <m cat="roads-surface" k="surface" v="dirt">
                                    <line outline="primary" stroke="color:surface-dirt" use="primary" />
                                </m>
                                <m cat="roads-surface" k="surface" v="unpaved">
                                    <line outline="primary" stroke="color:surface-unpaved" use="primary" />
                                </m>
                                <m>
                                    <line outline="primary" use="primary" />
                                    <m cat="cycling" k="cycleway:right" v="track">
                                        <line outline="cycleway-right" use="primary" />
                                    </m>
                                    <m cat="cycling" k="cycleway:left" v="track">
                                        <line outline="cycleway-left" use="primary" />
                                    </m>
                                    <m cat="cycling" k="cycleway" v="track">
                                        <line outline="cycleway" use="primary" />
                                    </m>
                                </m>
                            </m>
                            <m k="ford" v="yes">
                                <line use="ford" />
                                <text style="bold" caption="true"
                                    fill="color:amenity-water" k="depth" size="14"
                                    stroke="color:text-outline" stroke-width="2.0" />
                            </m>
                            <m k="4wd_only" v="yes">
                                <line use="4wd_only" />
                            </m>
                            <text use="major-road-name" />
                            <m cat="roads-shield" zoom-max="16" zoom-min="12">
                                <symbol merge-gap="150" merge-group="road-symbols" repeat="true"
                                    repeat-gap="150" src="gen:/shield/13/#fdf7e5/#7f462c"
                                    text-overlap="false" billboard="true" />
                            </m>
                            <m k="toll" v="yes">
                                <symbol merge-gap="100" merge-group="road-symbols" repeat="true"
                                    repeat-gap="120" src="assets:symbols/transport/toll_road.svg"
                                    text-overlap="false" />
                            </m>
                        </m>
                        <m cat="roads" v="trunk">
                            <m select="first">
                                <m k="ice_road" v="yes">
                                    <line outline="motorway" stroke="color:road-ice" use="trunk" />
                                </m>
                                <m k="winter_road" v="yes">
                                    <line outline="motorway" stroke="color:road-winter" use="trunk" />
                                </m>
                                <m cat="roads-surface" k="surface" v="dirt">
                                    <line outline="motorway" stroke="color:surface-dirt" use="trunk" />
                                </m>
                                <m cat="roads-surface" k="surface" v="unpaved">
                                    <line outline="motorway" stroke="color:surface-unpaved" use="trunk" />
                                </m>
                                <m>
                                    <line outline="motorway" use="trunk" />
                                    <m cat="cycling" k="cycleway:right" v="track">
                                        <line outline="cycleway-right" use="trunk" />
                                    </m>
                                    <m cat="cycling" k="cycleway:left" v="track">
                                        <line outline="cycleway-left" use="trunk" />
                                    </m>
                                    <m cat="cycling" k="cycleway" v="track">
                                        <line outline="cycleway" use="trunk" />
                                    </m>
                                </m>
                            </m>
                            <text use="major-road-name" />
                            <m cat="roads-shield" zoom-max="16" zoom-min="11">
                                <symbol merge-gap="150" merge-group="road-symbols" repeat="true"
                                    repeat-gap="150" src="gen:/shield/13/#fff0b7/#c35817"
                                    text-overlap="false" billboard="true" />
                            </m>
                            <m k="toll" v="yes">
                                <symbol merge-gap="100" merge-group="road-symbols" repeat="true"
                                    repeat-gap="120" src="assets:symbols/transport/toll_road.svg"
                                    text-overlap="false" />
                            </m>
                        </m>
                        <m cat="roads" v="motorway">
                            <m select="first">
                                <m k="ice_road" v="yes">
                                    <line outline="motorway" stroke="color:road-ice" use="highway" />
                                </m>
                                <m k="winter_road" v="yes">
                                    <line outline="motorway" stroke="color:road-winter" use="highway" />
                                </m>
                                <m>
                                    <line outline="motorway" use="highway" />
                                    <m cat="cycling" k="cycleway:right" v="track">
                                        <line outline="cycleway-right" use="highway" />
                                    </m>
                                    <m cat="cycling" k="cycleway:left" v="track">
                                        <line outline="cycleway-left" use="highway" />
                                    </m>
                                    <m cat="cycling" k="cycleway" v="track">
                                        <line outline="cycleway" use="highway" />
                                    </m>
                                </m>
                            </m>
                            <text use="major-road-name" />
                            <m cat="roads-shield" zoom-max="16" zoom-min="10">
                                <symbol merge-gap="150" merge-group="road-symbols" repeat="true"
                                    repeat-gap="150" src="gen:/shield/13/#fee4be/#c35817"
                                    text-overlap="false" billboard="true" />
                            </m>
                            <m k="toll" v="yes">
                                <symbol merge-gap="100" merge-group="road-symbols" repeat="true"
                                    repeat-gap="120" src="assets:symbols/transport/toll_road.svg"
                                    text-overlap="false" />
                            </m>
                        </m>
                        <xi:include href="inc_highway_oneways.xml" />
                    </m> <!-- area: no -->
                </m> <!-- bridge: no -->
            </m> <!-- tunnel: no -->
        </m>
    </m>
    <!-- ford symbol -->
    <m cat="fords" k="ford" v="yes" zoom-min="14">
        <!-- a node -->
        <m e="node">
            <symbol src="assets:symbols/natural/ford.svg" symbol-color="color:transportation"
                symbol-percent="60" merge-group="fords" merge-group-gap="2" />
            <text caption="true" style="bold" dy="-14" fill="color:amenity-water" k="depth"
                size="14" stroke="color:text-outline" stroke-width="2.0" />
        </m>
        <!-- or not a road -->
        <m e="way" k="highway" v="~|footway|path|cycleway|bridleway|track" select="first">
            <m k="depth">
                <text caption="true" style="bold" dy="-14" fill="color:amenity-water" k="depth"
                    size="14" stroke="color:text-outline" stroke-width="2.0"
                    symbol="assets:symbols/natural/ford.svg" symbol-color="color:transportation"
                    symbol-percent="60" mandatory="true" priority="10000" />
            </m>
            <m>
                <symbol src="assets:symbols/natural/ford.svg" symbol-color="color:transportation"
                    symbol-percent="60" mandatory="true" merge-group="fords" merge-group-gap="2" />
            </m>
        </m>
    </m>
</rendertheme>